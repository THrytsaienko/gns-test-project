(function(t){function e(e){for(var a,r,o=e[0],c=e[1],u=e[2],l=0,d=[];l<o.length;l++)r=o[l],i[r]&&d.push(i[r][0]),i[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);p&&p(e);while(d.length)d.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],a=!0,r=1;r<n.length;r++){var o=n[r];0!==i[o]&&(a=!1)}a&&(s.splice(e--,1),t=c(c.s=n[0]))}return t}var a={},r={app:0},i={app:0},s=[];function o(t){return c.p+"js/"+({}[t]||t)+"."+{"chunk-b7c04950":"c1df45a1"}[t]+".js"}function c(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(t){var e=[],n={"chunk-b7c04950":1};r[t]?e.push(r[t]):0!==r[t]&&n[t]&&e.push(r[t]=new Promise(function(e,n){for(var a="css/"+({}[t]||t)+"."+{"chunk-b7c04950":"ddad1dfa"}[t]+".css",i=c.p+a,s=document.getElementsByTagName("link"),o=0;o<s.length;o++){var u=s[o],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===a||l===i))return e()}var d=document.getElementsByTagName("style");for(o=0;o<d.length;o++){u=d[o],l=u.getAttribute("data-href");if(l===a||l===i)return e()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=e,p.onerror=function(e){var a=e&&e.target&&e.target.src||i,s=new Error("Loading CSS chunk "+t+" failed.\n("+a+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=a,delete r[t],p.parentNode.removeChild(p),n(s)},p.href=i;var f=document.getElementsByTagName("head")[0];f.appendChild(p)}).then(function(){r[t]=0}));var a=i[t];if(0!==a)if(a)e.push(a[2]);else{var s=new Promise(function(e,n){a=i[t]=[e,n]});e.push(a[2]=s);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=o(t),u=function(e){l.onerror=l.onload=null,clearTimeout(d);var n=i[t];if(0!==n){if(n){var a=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src,s=new Error("Loading chunk "+t+" failed.\n("+a+": "+r+")");s.type=a,s.request=r,n[1](s)}i[t]=void 0}};var d=setTimeout(function(){u({type:"timeout",target:l})},12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(e)},c.m=t,c.c=a,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)c.d(n,a,function(e){return t[e]}.bind(null,a));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/gns-test-project/",c.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=e,u=u.slice();for(var d=0;d<u.length;d++)e(u[d]);var p=l;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"1f8e":function(t,e,n){"use strict";var a=n("b441"),r=n.n(a);r.a},"3fcc":function(t,e,n){t.exports=n.p+"img/floppy-o.efc0c7c4.svg"},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var a=n("2b0e"),r=n("8c4f"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[t.loading?a("div",[t._v("Waiting for data...")]):a("div",{staticClass:"table"},[t.added?a("message",{attrs:{text:"New item added to database",color:"rgb(64, 175, 113)"}}):t._e(),t.updated?a("message",{attrs:{text:"Item updated",color:"rgb(253,205,133)"}}):t._e(),t.deleted?a("message",{attrs:{text:"Item deleted from database",color:"rgb(253,143,133)"}}):t._e(),t.serverError?a("message",{attrs:{text:"Error while connecting to database. Try again later.",color:"red"}}):t._e(),a("div",{staticClass:"table__search"},[a("search",{on:{input:t.input}})],1),a("div",{staticClass:"table__btn-block"},[a("button",{staticClass:"button",on:{click:t.openPopup}},[t._v("Add new data")])]),t.showPopup?a("div",{staticClass:"popup"},[a("form",{ref:"mainForm"},[a("div",{staticClass:"popup__btn-close",on:{click:t.closePopup}},[a("img",{staticClass:"popup__icon",attrs:{src:n("bf37"),alt:"Close"}})]),a("p",{staticClass:"popup__title"},[t._v("Add new element")]),a("div",{staticClass:"popup__form"},[a("div",{staticClass:"popup__field"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.newName,expression:"newName"},{name:"validate",rawName:"v-validate",value:"required|alpha_spaces",expression:"'required|alpha_spaces'"}],staticClass:"popup__input",attrs:{type:"name",name:"name","data-vv-validate-on":"blur"},domProps:{value:t.newName},on:{input:function(e){e.target.composing||(t.newName=e.target.value)}}}),a("label",{staticClass:"popup__label",class:{top:""!=t.newName}},[t._v("Name")]),t.errors.has("name")?a("p",{staticClass:"error"},[t._v(t._s(t.errors.first("name")))]):t._e()]),a("div",{staticClass:"popup__field"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.newLocation,expression:"newLocation"},{name:"validate",rawName:"v-validate",value:"required|alpha_spaces",expression:"'required|alpha_spaces'"}],staticClass:"popup__input",attrs:{type:"text",name:"location","data-vv-validate-on":"blur"},domProps:{value:t.newLocation},on:{input:function(e){e.target.composing||(t.newLocation=e.target.value)}}}),a("label",{staticClass:"popup__label",class:{top:""!=t.newLocation}},[t._v("Location")]),t.errors.has("location")?a("p",{staticClass:"error"},[t._v(t._s(t.errors.first("location")))]):t._e()]),a("div",{staticClass:"popup__field"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.newCurrency,expression:"newCurrency"},{name:"validate",rawName:"v-validate",value:"required|numeric",expression:"'required|numeric'"}],staticClass:"popup__input",attrs:{min:"1",type:"number",pattern:"[0-9.]",name:"currency","data-vv-validate-on":"blur"},domProps:{value:t.newCurrency},on:{input:function(e){e.target.composing||(t.newCurrency=e.target.value)}}}),a("label",{staticClass:"popup__label",class:{top:""!=t.newCurrency}},[t._v("Currency")]),t.errors.has("currency")?a("p",{staticClass:"error"},[t._v("\n              "+t._s(t.errors.first("currency"))+" Only numbers are allowed.\n            ")]):t._e()]),a("button",{staticClass:"button",on:{click:function(e){return e.preventDefault(),t.addItem(e)}}},[t._v("Add")])])])]):t._e(),a("div",{staticClass:"table__data"},[a("div",{staticClass:"table__head row"},[a("div",{staticClass:"table__title",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.sort("name")}}},[t._v("Name")]),a("div",{staticClass:"table__title",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.sort("location")}}},[t._v("Location")]),a("div",{staticClass:"table__title",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.sort("currency")}}},[t._v("Currency")]),a("div",{staticClass:"table__title",staticStyle:{cursor:"pointer"}},[t._v("Actions")])]),a("div",{staticClass:"table__body"},t._l(t.sortedData,function(e,n){return a("div",{key:n,staticClass:"row"},[a("div",{staticClass:"table__item"},[a("p",{ref:"editable",refInFor:!0,staticClass:"table__input",class:{disabled:e.disabled},attrs:{contenteditable:!e.disabled,disabled:e.disabled},on:{blur:function(e){return t.updateElement(e,"name")},keypress:function(e){return t.restrictChars(e,"name")},keydown:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.preventDefault()}}},[t._v("\n              "+t._s(e.name)+"\n            ")])]),a("div",{staticClass:"table__item"},[a("p",{ref:"editable",refInFor:!0,staticClass:"table__input",class:{disabled:e.disabled},attrs:{contenteditable:!e.disabled,disabled:e.disabled},on:{blur:function(e){return t.updateElement(e,"location")},keypress:function(e){return t.restrictChars(e,"location")},keydown:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.preventDefault()}}},[t._v("\n              "+t._s(e.location)+"\n            ")])]),a("div",{staticClass:"table__item"},[a("p",{ref:"editable",refInFor:!0,staticClass:"table__input",class:{disabled:e.disabled},attrs:{contenteditable:!e.disabled,disabled:e.disabled},on:{input:function(e){return t.updateElement(e,"currency")},keypress:function(e){return t.restrictChars(e,"currency")},keydown:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.preventDefault()}}},[t._v("\n              "+t._s(e.currency)+"\n            ")])]),a("div",{staticClass:"table__item"},[a("div",{staticClass:"table__buttons"},[a("div",{staticClass:"table__button",on:{click:function(n){return t.showDetails(e)}}},[t._m(0,!0),a("span",[t._v("Details")])]),e.disabled?a("div",{staticClass:"table__button",on:{click:function(n){return t.editItem(e)}}},[t._m(2,!0),a("span",[t._v("Edit")])]):a("div",{staticClass:"table__button",on:{click:function(n){return t.editItem(e,!0)}}},[t._m(1,!0),a("span",[t._v("Save")])]),a("div",{staticClass:"table__button",on:{click:function(n){return t.deleteItem(e.doc_id)}}},[t._m(3,!0),a("span",[t._v("Delete")])])])])])}),0)]),a("div",{staticClass:"total"},[a("p",{staticClass:"total__title"},[t._v("Total sum")]),a("p",{staticClass:"total__sum"},[t._v(t._s(t.totalSum))])])],1)])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table__image"},[a("img",{staticClass:"table__icon",attrs:{src:n("af8f"),alt:"Lok for Details"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table__image"},[a("img",{staticClass:"table__icon",attrs:{src:n("3fcc"),alt:"Edit"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table__image"},[a("img",{staticClass:"table__icon",attrs:{src:n("6582"),alt:"Edit"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table__image"},[a("img",{staticClass:"table__icon",attrs:{src:n("a44c"),alt:"Delete"}})])}],o=(n("456d"),n("ac6a"),n("55dd"),n("6762"),n("2fdb"),n("6b54"),n("7f7f"),n("386d"),n("96cf"),n("3b8d")),c=n("59ca"),u=n.n(c),l=(n("e71f"),{apiKey:"AIzaSyCxAKVes_12KzEnt7C-RTIVCKY9z9buDHc",authDomain:"gns-test-ed442.firebaseapp.com",databaseURL:"https://gns-test-ed442.firebaseio.com",projectId:"gns-test-ed442",storageBucket:"gns-test-ed442.appspot.com",messagingSenderId:"383653697678",appId:"1:383653697678:web:63c5e952e5afd057"});u.a.initializeApp(l);var d=u.a.firestore(),p=function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d.collection("data").get().then(function(t){return t.docs}).then(function(t){return t.map(function(t){return Object.assign({doc_id:t.id},t.data())})}).catch(function(t){alert("Error while reading documents from database: ",t)});case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),f=function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d.collection("data").doc(e).delete().then(function(){}).catch(function(t){alert("Error removing document: ",t)});case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),m=function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:d.collection("data").doc().set(e).then(function(){}).catch(function(t){alert("Error writing document: ",t)});case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),v=function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(e,n){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:d.collection("data").doc(e).set(n,{merge:!0}).then(function(){}).catch(function(t){alert("Error writing document: ",t)});case 1:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}(),h=n("5ee5"),_=n("2f62").default;h.use(_);var b=new _.Store({state:{tableData:[]},mutations:{getDataFromDB:function(t,e){t.tableData=e}},actions:{getDataFromDB:function(t,e){var n=t.commit;n("getDataFromDB",e)}}}),g=b,y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{type:"text",placeholder:"Search"},domProps:{value:t.search},on:{input:[function(e){e.target.composing||(t.search=e.target.value)},t.input]}})])},C=[],w={name:"search",data:function(){return{search:""}},methods:{input:function(){this.$emit("input",this.search)}}},D=w,k=(n("1f8e"),n("2877")),E=Object(k["a"])(D,y,C,!1,null,"4536c548",null),x=E.exports,S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"message",style:t.style},[n("p",[t._v(t._s(t.text))])])},O=[],j={name:"message",props:["text","color"],computed:{style:function(){return"background-color: ".concat(this.color)}}},N=j,T=(n("c917"),Object(k["a"])(N,S,O,!1,null,"7d0e47c9",null)),I=T.exports,P=n("767e"),L={name:"Table",data:function(){return{newName:"",newLocation:"",newCurrency:"",tableData:null,name:"",location:"",currency:0,sortBy:"name",sortDir:"asc",search:"",loading:!0,showPopup:!1,added:!1,updated:!1,deleted:!1,serverError:!1}},components:{search:x,message:I},mounted:function(){this.getData()},computed:{sortedData:function(){var t=this;if(this.tableData){if(this.search){var e=this.getSortedData();return e.filter(function(e){return t.inSearch(e.name)||t.inSearch(e.location)||t.inSearch(e.currency.toString())})}return this.getSortedData()}},totalSum:function(){if(this.countTotal())return this.tableData.reduce(function(t,e){return t+e.currency},0)}},methods:{inSearch:function(t){return t.toLowerCase().includes(this.search.toLowerCase())},countTotal:function(){return!this.loading&&null!==this.tableData&&this.tableData.length>0},isCurrency:function(t){return"currency"===t},showDetails:function(t){this.$router.push({name:"details",params:{id:t.id,details:t}})},getSortedData:function(){var t=this;return this.tableData.sort(function(e,n){var a=1,r=-1,i="desc"===t.sortDir?r:a;return t.isCurrency(t.sortBy)?e[t.sortBy]<n[t.sortBy]?r*i:a*i:e[t.sortBy].toLowerCase()<n[t.sortBy].toLowerCase()?r*i:a*i})},deleteItem:function(t){var e=this;f(t).then(function(){e.deleted=!0,e.getData(),setTimeout(function(){e.deleted=!1},6e3)}).catch(function(){e.serverError=!0,setTimeout(function(){e.serverError=!1},6e3)})},restrictChars:function(t,e){var n=/\d/,a=/\D/;this.isCurrency(e)?n.test(String.fromCharCode(t.charCode))||t.preventDefault():a.test(String.fromCharCode(t.charCode))||t.preventDefault()},updateElement:function(t,e){this.isCurrency(e)?this[e]=parseInt(t.target.innerText):this[e]=t.target.innerText},openPopup:function(){this.showPopup=!0},closePopup:function(){this.showPopup=!1,this.newName="",this.newLocation="",this.newCurrency=0},cleanRow:function(){this.name="",this.location="",this.currency=0},addItem:function(){var t=this;this.$validator.validate().then(function(e){if(e){var n={name:t.newName,location:t.newLocation,currency:parseInt(t.newCurrency),id:P()};m(n).then(function(){t.closePopup(),t.getData(),t.added=!0,setTimeout(function(){t.added=!1},6e3)}).catch(function(){t.serverError=!0,setTimeout(function(){t.serverError=!1},6e3)})}})},updateItem:function(t,e){var n=this;v(t.doc_id,e).then(function(){n.getData(),n.cleanRow(),t.disabled=!0,n.updated=!0,setTimeout(function(){n.updated=!1},6e3)}).catch(function(){n.serverError=!0,setTimeout(function(){n.serverError=!1},6e3)})},getData:function(){var t=this;p().then(function(e){g.dispatch("getDataFromDB",e),t.tableData=g.state.tableData,t.tableData.forEach(function(e){t.$set(e,"disabled",!0)}),t.loading=!1}).catch(function(){t.serverError=!0,setTimeout(function(){t.serverError=!1},6e3)})},editItem:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t.disabled=!1,e){var n={};""!==this.name&&Object.assign(n,{name:this.name}),""!==this.location&&Object.assign(n,{location:this.location}),0!==this.currency&&Object.assign(n,{currency:this.currency}),0===Object.keys(n).length?t.disabled=!0:this.updateItem(t,n)}},sort:function(t){t===this.sortBy&&(this.sortDir="asc"===this.sortDir?"desc":"asc"),this.sortBy=t},input:function(t){this.search=t}}},B=L,A=(n("a759"),Object(k["a"])(B,i,s,!1,null,"d5eadef8",null)),$=A.exports;a["a"].use(r["a"]);var R=new r["a"]({mode:"history",base:"/gns-test-project/",routes:[{path:"/",name:"table",component:$},{path:"/details/:id",name:"details",component:function(){return n.e("chunk-b7c04950").then(n.bind(null,"2571"))},props:!0,beforeEnter:function(t,e,n){return void 0==t.params.details&&n({path:"/"}),n()}}]}),F=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("router-view")},q=[],K={name:"App"},z=K,M=(n("7faf"),Object(k["a"])(z,F,q,!1,null,null,null)),H=M.exports,J=n("7bb1");a["a"].use(J["a"],{classes:!0,classNames:{invalid:"is-invalid"}}),a["a"].config.productionTip=!1,new a["a"]({router:R,store:g,render:function(t){return t(H)}}).$mount("#app")},"5ba9":function(t,e,n){},6582:function(t,e,n){t.exports=n.p+"img/edit.1a37e393.svg"},"7faf":function(t,e,n){"use strict";var a=n("8fba"),r=n.n(a);r.a},"8fba":function(t,e,n){},a44c:function(t,e,n){t.exports=n.p+"img/trash-o.3fd19989.svg"},a759:function(t,e,n){"use strict";var a=n("5ba9"),r=n.n(a);r.a},af8f:function(t,e,n){t.exports=n.p+"img/caret-right.cc1d4dc5.svg"},b441:function(t,e,n){},bf37:function(t,e,n){t.exports=n.p+"img/close.dde0ae63.svg"},c638:function(t,e,n){},c917:function(t,e,n){"use strict";var a=n("c638"),r=n.n(a);r.a}});
//# sourceMappingURL=app.84f9c7d6.js.map